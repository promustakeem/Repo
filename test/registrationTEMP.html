<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/form.css">
    <link rel="stylesheet" href="./css/footer.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Registration Page</title>
    <script>
        window.onload = function () {
            if (localStorage.getItem("token") == null) {
                window.location.href = window.location.protocol + "//" + window.location.host + "/login.html";

            } else {
                // getUserInfo();                
            }
        }
    </script>
    <link rel="icon" href="/images/logo_transparent.png" type="image/icon type" />

</head>

<body>

    <!-- Modal -->
    <div class="modal fade" id="infoModal" tabindex="-1" role="dialog" aria-labelledby="infoModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="infoModalLabel">Information</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="infoText">
                        Please select a country to view specific information.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    
   



            <div class="container mb-5 pb-5 justify-content-center">
                <form>
                    <div class="card card1" >
                        <!--  -->
                        <select id="country-select" style="margin-left: 50%; margin-right: 30px; margin-top: 5px;">
                            <option value="">Select Country</option>
                            <option value="in">India</option>
                            <option value="us">United States</option>
                        </select>
               
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-info-circle" viewBox="0 0 16 16" id="myinfo"
                                style="margin-left: 31rem; margin-top: -50px;">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                <path
                                    d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
                            </svg>
                        </div>
                        <div class="card-body mx-5 text-center">
                            <h1 class="card-title mb-4 mt-3 text-center heading">SignUp</h1>
                            <div class="row">
                                <div class="col-sm-12 p-0">
                                    <div class="form-group">
                                        <div class=""> <input class="form-control" name="cname" id="cname" type="text"
                                                placeholder="Company name" onblur="FirstLetterCapital()" required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 p-0">
                                    <div class="form-group">
                                        <div class="input-group"> <input autocomplete="off" class="form-control"
                                                name="email" id="email" type="text" placeholder="example@mail.com"
                                                required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 p-0">
                                    <div class="form-group">
                                        <div class="input-group"> <input class="form-control" type="text" id="phone"
                                                name="phone" placeholder="Phone number with country code" value="+91 "
                                                required>
                                        </div>
                                        <span id="phone-error"></span>
                                        <div class="input-group"> <input class="form-control" style="display: none;"
                                                type="text" id="phn1" name="phone"
                                                placeholder="Phone number with country code" value="+1 " required>
                                        </div>
                                        <span id="phone-error"></span>

                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 p-0">
                                    <div class="form-group">
                                        <div class="input-group"> <input class="form-control" type="text" id="gst"
                                                name="gst" placeholder="GST Number" required>
                                        </div>
                                        <div class="input-group"> <input class="form-control" style="display: none;"
                                                type="text" id="tin" name="tin" placeholder="TIN Number" required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 p-0">
                                    <div class="form-group">
                                        <div class="input-group"> <input class="form-control" type="text" id="address"
                                                name="address" placeholder="Company Address" required>
                                        </div>
                                        <div id="address-error" class="error-message"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 p-0">
                                    <div class="form-group">
                                        <div class="input-group"> <input class="form-control" id="password"
                                                name="password" type="password" placeholder="Create password"
                                                autocomplete="off" required>
                                            <input type="checkbox" id="togglePw" onclick="showPassword()" />
                                            <label for="togglePw" class="fa"></label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 p-0">
                                    <div class="form-group">
                                        <div class="input-group"> <input class="form-control" id="confirm_password"
                                                name="confirm_password" type="password" placeholder="Confirm password"
                                                onkeyup="matchPassword()" required> </div>
                                        <span id="wrong_pass_alert"
                                            style="margin-right: 138px; font-size: 14px;"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center signup-link px-5 mt-3">
                                <a href="login.html" class="terms p-1" style="color: #069A8E;">Already a Member? Login</a><br>
                            </div>
                            <div class=" text-center px-5 mt-3"></div>
                            <button class="btn confirm-button px-3" type="submit"
                                onclick="wrong_pass_alert()">SignUp</button>&nbsp;&nbsp;
                        </div>

                    </div>
            </div>

            </form>
    </div>
    
    <!-- Footer Start -->
    <div>
        <footer class="footer-login mt-5">
            <div class="container-fluid text-center mt-1 pb-2 pt-2">
                <div class="row1">
                    <span class="footer-content">Invoice generated by <a style="font-weight: bold;
                        color: white;text-decoration: none;" href="http://invoices4us.com/">invoices4us.com</a></span>
                </div>
            </div>
        </footer>
    </div>
    <!-- Footer finish -->


    <script>
  
         // Update modal text when country selection changes
    document.getElementById("country-select").addEventListener("change", function() {
        var infoText = document.getElementById("infoText");

        if (this.value === "us") {
            infoText.innerHTML = `
                • Information specific to United States:<br>
                • Please provide only the company details.<br>
                • Please refrain from using personal email addresses for company correspondence.<br>
                • Ensure that the company phone number includes the country code for validity.<br>
                • Comply with local tax regulations.<br>
                • The password must be at least 8 characters long and include lowercase letters, uppercase letters,
                • digits, and special characters.
            `;
        } else if (this.value === "in") {
            infoText.innerHTML = `
                • Please provide only the company details.<br>
                • Please refrain from using personal email addresses for company correspondence.<br>
                • Ensure that the company phone number includes the country code for validity.<br>
                • The GST number should not include any special characters.<br>
                • Please avoid using special characters in the company address.<br>
                • The password must be a minimum of 8 characters long and include at least one lowercase letter, one uppercase letter, one digit, and one special character.`;
        } else {
            infoText.innerHTML = "Please select a country to view specific information.";
        }
    });

    // Open the modal when the "myinfo" element is clicked
    const myinfo = document.getElementById("myinfo");
    myinfo.addEventListener("click", function() {
        $("#infoModal").modal("show");
    });

        const countrySelect = document.getElementById('country-select');
        const gstField = document.getElementById('gst');
        const tinField = document.getElementById('tin');
        const phnField = document.getElementById('phone')
        const phn1Field = document.getElementById('phn1')

        countrySelect.addEventListener('change', function () {
            if (countrySelect.value === 'in') {
                gstField.style.display = 'block';
                tinField.style.display = 'none';
                phnField.style.display = 'block'
                phn1Field.style.display = 'none'
            } else {
                gstField.style.display = 'none';
                tinField.style.display = 'block';
                phnField.style.display = 'none'
                phn1Field.style.display = 'block'
            }
        });
        function FirstLetterCapital() {
            let cname = document.getElementById("cname");
            cname.value = cname.value.charAt(0).toUpperCase() + cname.value.slice(1);
        }

        var emailInput = document.getElementById("email");
        emailInput.addEventListener("input", function () {
            if (!validateEmail(this.value)) {
                this.setCustomValidity("Invalid email address");
            } else {
                this.setCustomValidity("");
            }
        });

        function validateEmail(email) {
            var emailRegex = /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/;
            return emailRegex.test(email);
        }


        const phoneInput = document.getElementById('phone');
        const phoneError = document.getElementById('phone-error');

        phoneInput.addEventListener('blur', () => {
            const phoneRegex = /^\+(?:[0-9] ?){8,14}[0-9]$/;
            const phoneNumber = phoneInput.value;

            if (!phoneRegex.test(phoneNumber)) {
                phoneError.textContent = 'Please enter valid phone number';
                phoneInput.classList.add('error');
            } else {
                phoneError.textContent = '';
                phoneInput.classList.remove('error');
            }
            // Extract the country code from the phone number
            var countryCodeRegex = /^\+([0-9]{1,3})/;
            var matches = phoneNumber.match(countryCodeRegex);
            if (!matches || matches.length < 2) {
                return false;
            }

            // Check if the country code is valid
            var countryCode = matches[1];
            var validCountryCodes = ['1', '44', '91', '61']; // Add more valid country codes here
            return validCountryCodes.includes(countryCode);
        });



        var gstInput = document.getElementById("gst");
        gstInput.addEventListener("input", function () {
            if (!validateGST(this.value)) {
                this.setCustomValidity("Invalid GST number");
            } else {
                this.setCustomValidity("");
            }
        });
        function validateGST(gst) {
            var gstRegex = /^([0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[0-9]{1}[Z]{1}[0-9,A-Z]{1})$/;
            return gstRegex.test(gst);
        }

        // var addressInput = document.getElementById("address");
        // addressInput.addEventListener("input", function () {
        //     if (!validateAddress(this.value)) {
        //         this.setCustomValidity("Invalid address");
        //     } else {
        //         this.setCustomValidity("");
        //     }
        // });
        // function validateAddress(address) {
        //     var addressRegex = /[!@#$%^&*()_+\=\[\]{};':"\\|.<>\/?]/;
        //     return addressRegex.test(address);
        // }

        const addressField = document.getElementById('address');
        const addressError = document.getElementById('address-error');

        addressField.addEventListener('input', validateaddress);

        function validateaddress() {
            const addressRegex = /[!@#$%^&*_+\=\[\]{};':"\\|.<>?]/;

            if (addressRegex.test(addressField.value)) {
                addressError.textContent = 'Please Enter Valid address';
            } else {
                addressError.textContent = '';
            }
        }

        var passwordInput = document.getElementById("password");
        passwordInput.addEventListener("input", function () {
            if (!validatePassword(this.value)) {
                this.setCustomValidity("Password must be at least 8 characters long and contain at least one lowercase letter, one uppercase letter, one digit, one special character");
            } else {
                this.setCustomValidity("");
            }
        });

        function validatePassword(password) {
            var passwordRegex = /^(?=.?[A-Z])(?=.?[a-z])(?=.?[0-9])(?=.?[#?!@$%^&*-]).{8,15}$/;
            return passwordRegex.test(password);
        }




        function showPassword() {
            var x = document.getElementById("password");
            if (x.type === "password") {
                x.type = "text";
            } else {
                x.type = "password";
            }
        }

        var passwordInput = document.getElementById("password");
        var confirmPasswordInput = document.getElementById("confirm_password");

        confirmPasswordInput.addEventListener("input", function () {
            if (this.value !== passwordInput.value) {
                this.setCustomValidity("Passwords do not match");
            } else {
                this.setCustomValidity("");
            }
        });

        let popup = document.getElementById("popup");
        function openPopup() {
            popup.classList.add("open-popup");
        }
        function closePopup() {
            popup.classList.remove("open-popup");
        }

    </script>



    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>

</html>